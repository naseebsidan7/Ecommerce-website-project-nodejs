!function(){var e=this&&this.__assign||function(){return e=Object.assign||function(e){for(var i,t=1,o=arguments.length;t<o;t++){i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},e.apply(this,arguments)};try{!function(){var i="1.2.17",t=navigator.userAgent,o="https://d1lu3pmaz2ilpx.cloudfront.net/5a28e627",s={Persist:"PERSIST",None:"NONE"},n={Tie:"_tie",Identify:"identify",Pageview:"pageview",SessionTie:"_s_tie"},r={pageview:!0,"page view":!0,"page-view":!0,page_view:!0},a={os:function(){return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"Mac OS X":/Linux/.test(t)?"Linux":""},btoa:function(e){for(var i=String(e),t="",o=0,s=void 0,n=void 0,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.charAt(0|o)||o%1;t+=r.charAt(63&s>>8-o%1*8)){if(i.charAt(0|o)||(r="="),(n=i.charCodeAt(o+=.75))>255)return;s=s<<8|n}return t},isValidGuid:function(e){var i=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/;return e&&i.test(e.trim())},warnIfInvalidToken:function(e){var i=a.isValidGuid(e);return i||console.error("Token is not a valid GUID"),i},isValidUserId:function(e){if(!e)return!1;var i=function(e){return e.toString().toLowerCase().trim()},t=["undefined","null","n/a","","none",{},0,1,NaN,!0,!1,"0","1","missing-id"].map(i),o=i(e);return!(t.indexOf(o)>-1)}},c=function(){function t(e,t){this.sessionCookieTime=307584e6,this.userCookieTime=307584e6,this.sessionCookieName="tatari-session-cookie",this.sessionUrlParamName="tatari_session_id",this.sessionId="",this.userCookieName="tatari-user-cookie",this.userId="",this.version=i,this.util=a,this.debugCookieName="tatari-debug-cookie",this.debugCookieTime=864e5,this.debug=!1,this.ipCookieName="t-ip",this.ipCookieTime=3e5,this._i=e,this.url=o,this.cookieSupport=this.getCookieSupport(),this.config=t,this.checkDebugCookie(),this.checkSessionCookie(),this.checkUserCookie(),this.recordIpsIfNecessary(),a.warnIfInvalidToken(e),this.debug&&(console.info("Debug: Tatari Tracker Lib Loaded",this),console.info("Debug: Tatari Tracker TLD",this.getDomain()))}return t.prototype.enableDebug=function(){this.createCookie(this.debugCookieName,"1",this.debugCookieTime),this.debug=!0,console.info("Debug: Tatari Tracker Debug Enabled")},t.prototype.init=function(e,i){this._i=e,this.config=i,a.warnIfInvalidToken(e)},t.prototype.flushCommandQueue=function(e){if(void 0===e&&(e=[]),e.length>0){var i=this;e.forEach(function(e){i[e[0]].apply(i,e.slice(1,e.length))})}},t.prototype.scrubParams=function(e){var i=this;if(this.config&&this.config.queryParamScrubs&&e){var t=document.createElement("a");t.setAttribute("href",e);var o=t.search;if(o){var s=[];o.substr(1).split("&").forEach(function(e){var t=decodeURIComponent(e.split("=")[0]);i.config.queryParamScrubs.some(function(e){return e===t})||s.push(e)});var n="?"+s.join("&");return e.replace(o,n)}}return e},t.prototype.scrubUrl=function(e){if(this.config&&this.config.urlScrubs&&e){var i=e;return this.config.urlScrubs.forEach(function(t){var o=t.test(e)&&RegExp.$1;o&&(i=e.replace(o,"TATARI-SCRUBBED"))}),i}return e},t.prototype.scrub=function(e){return this.config?this.scrubUrl(this.scrubParams(e)):e},t.prototype.getProperties=function(){return{$os:a.os(),$referrer:this.scrub(document.referrer),$currentUrl:this.scrub(window.location.href)}},t.prototype._track=function(i,t){void 0===t&&(t="");try{i!==n.Tie&&i!==n.SessionTie&&this.checkSessionCookie();var o=t;if("object"==typeof t)try{o=JSON.stringify(t)}catch(e){o="",console.warn("Tatari Tracker arg should be a valid JSON object")}o.length>65535&&(console.warn("Tatari Tracker arg should be smaller than 65535 characters, was "+o.length+"."),"object"==typeof t&&console.warn("Tatari Tracker arg size was the result of large JSON serialization."));var s=e({version:this.version,token:this._i,sessionId:this.sessionId,cookieSupport:this.cookieSupport,userId:this.userId,arg:o,event:i},this.getProperties());this.removeEmptyKeys(s);var r=this.buildReqUrl(s);this.debug&&console.info("Debug: Tatari Tracker Event Fired",s),this.sendRequest(r)}catch(e){console.warn("Tatari's tracking library encountered an error when attempting to track.",e)}},t.prototype.sendRequest=function(e){if(this._i){var i=new XMLHttpRequest;i.open("GET",e,!0),i.send(null)}else this.debug&&console.info("Debug: Tatari Tracker suppressing request with invalid token")},t.prototype.removeEmptyKeys=function(e){Object.keys(e).forEach(function(i){return(void 0===e[i]||null===e[i]||""===e[i])&&delete e[i]})},t.prototype.buildReqUrl=function(e,i){void 0===i&&(i=this.url);var t=this.buildDataBlob(e);return i+"?data="+encodeURIComponent(t)+"&date="+ +new Date},t.prototype.buildDataBlob=function(e){var i=Object.keys(e).map(function(i){var t=encodeURIComponent;return"object"==typeof e[i]&&(t=function(e){return encodeURIComponent(JSON.stringify(e))}),encodeURIComponent(i)+"="+t(e[i])}).join("&");return""+this.util.btoa(i)},t.prototype.pageview=function(){this._track(n.Pageview),window.ttm&&window.ttm.onPageview&&window.ttm.onPageview()},t.prototype.track=function(e,i){return e?"string"==typeof e&&r[e.toLowerCase()]?void console.warn("Supressing event "+e):(this._track("e_"+e.toString(),i),void(window.ttm&&window.ttm.onTrack&&window.ttm.onTrack(e.toString(),i))):void console.error("Undefined event passed to track.")},t.prototype.identify=function(e){var i=this.userId;if(!a.isValidUserId(e))return void console.error("Invalid id passed to identify.");i&&e.toString()===i||(this.userId=e.toString(),this.createCookie(this.userCookieName,this.userId,this.userCookieTime),this._track(n.Tie)),this._track(n.Identify),window.ttm&&window.ttm.onIdentify&&window.ttm.onIdentify(e.toString())},t.prototype.guid=function(){var e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return""+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},t.prototype.createCookie=function(e,i,t){var o="",s=new Date,n="domain="+this.getDomain()+";";return s.setTime(s.getTime()+t),o="expires="+s.toUTCString()+";",document.cookie=e+"="+i+"; "+o+" "+n+" path=/",i},t.prototype.getDomain=function(){var e=document.location||{hostname:""},i=e.hostname.split("."),t="";return i.some(function(e,o){var s=i.slice(i.length-o-1).join(".");if(document.cookie="testTLD=test;domain="+s+";",-1!==document.cookie.indexOf("testTLD=test"))return t=s,document.cookie="testTLD=;domain="+t+";expires="+new Date(0).toUTCString()+";",!0}),t},t.prototype.getCookie=function(e){for(var i=e+"=",t=decodeURIComponent(document.cookie),o=t.split(";"),s=0,n=o;s<n.length;s++){for(var r=n[s];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(i))return r.substring(i.length,r.length)}},t.prototype.removeCookie=function(e){var i=this.getDomain();document.cookie=e+"=; Max-Age=-99999999;",i&&(document.cookie=e+"=; Max-Age=-99999999; domain="+i+";")},t.prototype.checkUserCookie=function(){var e=this.getCookie(this.userCookieName);e&&!a.isValidUserId(e)?this.removeCookie(this.userCookieName):(this.userId=e,this.userId&&(this.removeCookie(this.userCookieName),this.createCookie(this.userCookieName,this.userId,this.userCookieTime)))},t.prototype.checkSessionCookie=function(){var e=this;this.sessionId=this.getCookie(this.sessionCookieName);var i,t=window.location.search?window.location.search.slice(1).split("&").map(function(e){return e.split("=").map(decodeURIComponent)}):[];t.forEach(function(t){t&&2===t.length&&t[0]===e.sessionUrlParamName&&(i=t)});var o=i&&i[1];this.sessionId&&!a.isValidGuid(this.sessionId)&&(console.warn("Invalid stored session ID ("+this.sessionId+"). Ignoring."),this.removeCookie(this.sessionCookieName),this.sessionId=null),o&&!a.isValidGuid(o)&&(console.warn("Invalid parameter session ID ("+o+"). Ignoring."),o=null),o&&this.sessionId!==o&&(this.sessionId&&this._track(n.SessionTie,o),this.createCookie(this.sessionCookieName,o,this.sessionCookieTime),this.sessionId=o),this.sessionId?(this.removeCookie(this.sessionCookieName),this.createCookie(this.sessionCookieName,this.sessionId,this.sessionCookieTime)):this.sessionId=this.createCookie(this.sessionCookieName,this.guid(),this.sessionCookieTime)},t.prototype.checkDebugCookie=function(){var e=this.getCookie(this.debugCookieName);this.debug=!!e},t.prototype.recordIpsIfNecessary=function(){var i=this;if(!this.getCookie(this.ipCookieName)){this.createCookie(this.ipCookieName,"1",this.ipCookieTime);var t={version:this.version,token:this._i,sessionId:this.sessionId};this.removeEmptyKeys(t),[this.buildReqUrl(t,"https://dvqigh9b7wa32.cloudfront.net/5a28e627"),this.buildReqUrl(e({ipv6:!0},t),"https://d330aiyvva2oww.cloudfront.net/5a28e627")].forEach(function(e){i.sendRequest(e)})}},t.prototype.getCookieSupport=function(){var e="tatari-cookie-test="+Math.floor(1e8*Math.random()),i=new Date;return i.setTime(i.getTime()+this.sessionCookieTime),document.cookie=e+"; expires="+i.toUTCString()+"; path=/",-1!==document.cookie.indexOf(e)?s.Persist:s.None},t}(),u=window.tatari||[],h=new c(u._i,u.config);window.tatari=h,h.flushCommandQueue(u)}()}catch(e){console.log(e)}}();